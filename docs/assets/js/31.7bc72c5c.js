(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{397:function(t,a,s){"use strict";s.r(a);var e=s(44),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"игровои-протокол"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#игровои-протокол"}},[t._v("#")]),t._v(" Игровой протокол")]),t._v(" "),s("p",[t._v("Одна и та же схема шифрования (с незначительными отличиями) использовалась как до, так и после C4, поэтому она практически не изменилась.")]),t._v(" "),s("p",[t._v("Все пакеты игрового сервера/клиента шифруются по схеме, основанной на XOR.")]),t._v(" "),s("p",[t._v("Начальный ключ состоит из двух частей: динамической части, заданной игровым сервером, и предварительно разделяемой части, заранее известной игровому клиенту (и серверу). У устаревших клиентов было две предварительно разделенные ключевые части. Тот, который будет выбран, был определен путем оценки динамической ключевой части, отправленной сервером.")]),t._v(" "),s("p",[t._v("Во время операций шифрования последние 4 байта (DWORD) динамической ключевой части увеличиваются на количество байтов, обработанных каждой операцией.")]),t._v(" "),s("p",[t._v("Как только клиент подключится, он немедленно отправит пакет незашифрованной версии протокола. Сервер ответит незашифрованным пакетом, указывающим, поддерживается ли протокол, и раскроет изменяемую ключевую часть. Сервер, если это применимо, также идентифицирует себя и отправит первоначальный ключ обфускации кода операции для клиента. Если ключ обфускации кода операции не равен 0, клиент затем перетасует большую часть своих 1-го и 2-го кодов операций.")]),t._v(" "),s("p",[t._v("Ключ запутывания CM также изменяется каждый раз, когда символ входит в систему.")]),t._v(" "),s("p",[t._v("За исключением первого пакета, каждый пакет игрового сервера передается с помощью следующих шагов:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("1. Запись пакетных данных\n2. Зашифруйте полезную нагрузку с помощью XOR с помощью обеих частей ключа\n3. Обновите изменяемую часть ключа\n4. Отправить пакет\n")])])]),s("p",[t._v("За исключением первого пакета, каждый пакет клиента игры передается с помощью следующих шагов:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("1. Запись пакетных данных\n2. Запутать код(ы) операции)\n3. Зашифруйте полезную нагрузку с помощью XOR с помощью обеих частей ключа\n4. Обновите изменяемую часть ключа\n5. Пакеты отправки пакетов игрового сервера/клиента не заполняются.")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);